# ═══════════════════════════════════════════════════════════════════════════
# MEESHY TRANSLATOR SERVICE - Environment Configuration
# Copy this file to .env and adjust values for your environment
# ═══════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# GENERAL CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────
DEBUG=false
NODE_ENV=production
WORKERS=16

# ─────────────────────────────────────────────────────────────────────────────
# SERVER PORTS
# ─────────────────────────────────────────────────────────────────────────────
FASTAPI_PORT=8000
GRPC_PORT=50051
ZMQ_PORT=5555

# ─────────────────────────────────────────────────────────────────────────────
# DATABASE
# ─────────────────────────────────────────────────────────────────────────────
DATABASE_URL=postgresql://meeshy:password@localhost:5432/meeshy
PRISMA_POOL_SIZE=15

# ─────────────────────────────────────────────────────────────────────────────
# REDIS CACHE
# ─────────────────────────────────────────────────────────────────────────────
REDIS_URL=redis://localhost:6379
TRANSLATION_CACHE_TTL=3600
CACHE_MAX_ENTRIES=10000

# ─────────────────────────────────────────════════════════════════════════════
# AUDIO SERVICES
# ─────────────────────────────────────────────────────────────────────────────
ENABLE_AUDIO_SERVICES=true
ENABLE_VOICE_API=true

# ─────────────────────────────────────────────────────────────────────────────
# WHISPER (Transcription)
# ─────────────────────────────────────────────────────────────────────────────
WHISPER_MODEL=base
WHISPER_DEVICE=auto
WHISPER_COMPUTE_TYPE=float16

# ═══════════════════════════════════════════════════════════════════════════
# TTS MODEL SELECTION
# ═══════════════════════════════════════════════════════════════════════════
#
# Available models:
#
# 1. CHATTERBOX (RECOMMENDED - Apache 2.0 License)
#    - Best quality/speed balance
#    - Full commercial use allowed
#    - 17 languages supported
#    TTS_MODEL=chatterbox
#
# 2. CHATTERBOX-TURBO (Apache 2.0 License)
#    - Faster than standard Chatterbox
#    - 350M parameters (lighter)
#    - Full commercial use allowed
#    TTS_MODEL=chatterbox-turbo
#
# 3. HIGGS-AUDIO-V2 (State-of-the-art quality)
#    ⚠️ WARNING: Commercial use LIMITED to < 100,000 users/year
#    - 50+ languages supported
#    - Best quality available
#    - Requires commercial license for > 100k users
#    - Contact: https://www.boson.ai/contact
#    TTS_MODEL=higgs-audio-v2
#
# 4. XTTS-V2 (Legacy - NON-COMMERCIAL)
#    ⚠️ WARNING: NO commercial use allowed!
#    - Coqui Public Model License
#    - Personal/research use only
#    - Company shut down in 2024
#    TTS_MODEL=xtts-v2
#
# ═══════════════════════════════════════════════════════════════════════════

TTS_MODEL=chatterbox
TTS_DEVICE=auto
TTS_OUTPUT_DIR=./audio_output
TTS_DEFAULT_FORMAT=mp3

# Chatterbox specific settings
CHATTERBOX_EXAGGERATION=0.5
CHATTERBOX_CFG_WEIGHT=0.5

# Legacy XTTS settings (only if using xtts-v2)
XTTS_MODELS_PATH=./models/xtts
XTTS_DEVICE=auto

# ─────────────────────────────────────────────────────────────────────────────
# VOICE CLONING
# ─────────────────────────────────────────────────────────────────────────────
VOICE_MODEL_CACHE_DIR=./voice_models
VOICE_CLONE_DEVICE=cpu

# ─────────────────────────────────────────────────────────────────────────────
# AUDIO OUTPUT
# ─────────────────────────────────────────────────────────────────────────────
AUDIO_OUTPUT_DIR=./audio_output
ANALYTICS_DATA_DIR=./analytics_data
MAX_CONCURRENT_JOBS=10

# ─────────────────────────────────────────────────────────────────────────────
# TRANSLATION ML MODELS
# ─────────────────────────────────────────────────────────────────────────────
MODELS_PATH=./models
BASIC_MODEL=t5-small
MEDIUM_MODEL=facebook/nllb-200-distilled-600M
PREMIUM_MODEL=facebook/nllb-200-distilled-1.3B

# ─────────────────────────────────────────────────────────────────────────────
# ML PERFORMANCE
# ─────────────────────────────────────────────────────────────────────────────
ML_BATCH_SIZE=16
GPU_MEMORY_FRACTION=0.8
QUANTIZATION_LEVEL=float16
TRANSLATION_TIMEOUT=20
MAX_TEXT_LENGTH=100000
CONCURRENT_TRANSLATIONS=4

# ─────────────────────────────────────────────────────────────────────────────
# LANGUAGE SETTINGS
# ─────────────────────────────────────────────────────────────────────────────
DEFAULT_LANGUAGE=fr
AUTO_DETECT_LANGUAGE=true
SUPPORTED_LANGUAGES=af,ar,bg,bn,cs,da,de,el,en,es,fa,fi,fr,he,hi,hr,hu,hy,id,ig,it,ja,ko,ln,lt,ms,nl,no,pl,pt,ro,ru,sv,sw,th,tr,uk,ur,vi,zh

# ─────────────────────────────────────────────────────────────────────────────
# HUGGINGFACE
# ─────────────────────────────────────────────────────────────────────────────
HF_HOME=./models
TRANSFORMERS_CACHE=./models
HUGGINGFACE_HUB_CACHE=./models
