# Configuration Gateway Meeshy
NODE_ENV=development
PORT=3000
GATEWAY_PORT=3000

# Frontend URL for tracking links (flexible domain support)
FRONTEND_URL=http://localhost:3100
# For production: FRONTEND_URL=https://meeshy.me
# For staging: FRONTEND_URL=https://staging.meeshy.me

# ===== DATABASE =====
POSTGRES_DB=meeshy
POSTGRES_USER=meeshy
POSTGRES_PASSWORD=MeeshyP@ssword
DATABASE_URL="mongodb+srv://meeshy-app:1DtO4d7ELWYq5ruhakR9@mongodb-31217e73-o6739ab9b.30e4c693.database.cloud.ovh.net/meeshy?replicaSet=replicaset&tls=true&authSource=admin"
PRISMA_CLIENT_OUTPUT_DIRECTORY=./shared/prisma/client
PRISMA_POOL_SIZE=15
PRISMA_DB_PROVIDER=mongodb 
# Configuration Redis (cache)
REDIS_URL=redis://localhost:6379
TRANSLATION_CACHE_TTL=3600
CACHE_MAX_ENTRIES=10000

# JWT Configuration
JWT_SECRET=meeshy-secret-key-dev

# ZMQ Translation Service Configuration
ZMQ_TRANSLATOR_HOST=translator
ZMQ_TRANSLATOR_PORT=5555
ZMQ_TIMEOUT=30000

# Legacy variables (dépréciées, utiliser ZMQ_TRANSLATOR_* à la place)
TRANSLATION_SERVICE_PORT=5555

# CORS Configuration
FRONTEND_URL=http://redis:3001

# ===== SECURITY =====

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000
ENABLE_RATE_LIMITING=true

# TURN Server Security (CVE-005)
TURN_SERVER=turn:turn.meeshy.me:3478
TURN_SECRET=your-turn-secret-key-here-change-in-production

# ===== ATTACHMENT ENCRYPTION (E2EE) =====

# Master key for encrypting server-side attachment keys (envelope encryption)
# REQUIRED for hybrid/server encryption modes
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# IMPORTANT: Keep this key secure and backed up! Loss of this key = loss of encrypted attachments
ATTACHMENT_MASTER_KEY=GENERATE_ME_WITH_COMMAND_ABOVE

# ===== PASSWORD RESET & SECURITY =====

# hCaptcha Configuration
HCAPTCHA_SECRET=0x0000000000000000000000000000000000000000
HCAPTCHA_SITE_KEY=10000000-ffff-ffff-ffff-000000000001
# Get your keys from: https://www.hcaptcha.com/

# Email Service Configuration (choose one: sendgrid or mailgun)
EMAIL_PROVIDER=sendgrid
EMAIL_FROM=noreply@meeshy.me
EMAIL_FROM_NAME=Meeshy

# SendGrid (if EMAIL_PROVIDER=sendgrid)
SENDGRID_API_KEY=your-sendgrid-api-key-here

# Mailgun (if EMAIL_PROVIDER=mailgun)
MAILGUN_API_KEY=your-mailgun-api-key-here
MAILGUN_DOMAIN=mg.meeshy.me

# GeoIP Service (MaxMind - optional but recommended)
GEOIP_LICENSE_KEY=your-maxmind-license-key-here
MAXMIND_ACCOUNT_ID=your-maxmind-account-id-here
# Get free account at: https://www.maxmind.com/en/geolite2/signup

# Security Admin Emails (comma-separated list for critical alerts)
SECURITY_ADMIN_EMAILS=security@meeshy.me,admin@meeshy.me

# Development Settings
BYPASS_CAPTCHA=false  # Set to true ONLY in development to bypass CAPTCHA

# ===== NOTIFICATIONS & PUSH NOTIFICATIONS =====

# Firebase Admin SDK (OPTIONAL - app works without it)
# If not configured, notifications will only work via WebSocket (in-app)
# If configured, users will also receive push notifications on mobile/web
FIREBASE_ADMIN_CREDENTIALS_PATH=./secrets/firebase-admin.json
# To get Firebase credentials:
# 1. Go to Firebase Console: https://console.firebase.google.com/
# 2. Select your project
# 3. Go to Project Settings > Service Accounts
# 4. Click "Generate New Private Key"
# 5. Save the JSON file to ./secrets/firebase-admin.json

# Notification Feature Flags
ENABLE_PUSH_NOTIFICATIONS=true  # Enable/disable push notifications globally
ENABLE_NOTIFICATION_SYSTEM=true # Enable/disable entire notification system

# ===== SESSION CONFIGURATION =====

# Session duration in days based on device type
SESSION_EXPIRY_MOBILE_DAYS=365    # iOS/Android apps (default: 365 days = 1 year)
SESSION_EXPIRY_DESKTOP_DAYS=30    # Desktop browsers (default: 30 days)
SESSION_EXPIRY_TRUSTED_DAYS=365   # Trusted devices after 2FA (default: 365 days)
MAX_SESSIONS_PER_USER=10          # Maximum concurrent sessions per user

# ===== BRANDING =====

# Brand logo URL for emails (if not set in infrastructure/.env.example)
BRAND_LOGO_URL=https://meeshy.me/images/meeshy-logo.png
